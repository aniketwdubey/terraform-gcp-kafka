# Copy this file to terraform.tfvars and update with your values

project_id  = "your-gcp-project-id"
region      = "us-central1"
environment = "dev"
cluster_id  = "kafka-cluster-dev"
subnet_id   = "projects/your-project/regions/us-central1/subnetworks/your-subnet"

vcpu_count   = 3
memory_bytes = "3221225472"  # 3GB

access_config = {
  network_configs = [
    {
      subnet = "projects/your-project/regions/us-central1/subnetworks/your-subnet"
    }
  ]
}

kafka_topics = {
  "orders" = {
    partition_count    = 3
    replication_factor = 3
    configs = {
      "retention.ms"         = "604800000"  # 7 days
      "cleanup.policy"       = "delete"
      "compression.type"     = "producer"
      "min.insync.replicas" = "2"
    }
  }
  "events" = {
    partition_count    = 6
    replication_factor = 3
    configs = {
      "retention.ms"    = "86400000"  # 1 day
      "cleanup.policy"  = "compact"
    }
  }
}

kafka_acls = {
  "cluster-acl" = {
    acl_id = "cluster"
    acl_entries = [
      {
        principal       = "User:YOUR_PROJECT_NUMBER-compute@developer.gserviceaccount.com"
        permission_type = "ALLOW"
        operation       = "DESCRIBE"
        host            = "*"
      }
    ]
  },
  "orders-topic-acl" = {
    acl_id = "topic/orders"
    acl_entries = [
      {
        principal       = "User:816966504679-compute@developer.gserviceaccount.com"
        permission_type = "ALLOW"
        operation       = "ALL"
        host            = "*"
      },
      {
        principal       = "User:producer-service@my-project.iam.gserviceaccount.com"
        permission_type = "ALLOW"
        operation       = "WRITE"
        host            = "*"
      },
      {
        principal       = "User:consumer-service@my-project.iam.gserviceaccount.com"
        permission_type = "ALLOW"
        operation       = "READ"
        host            = "*"
      }
    ]
  },
  "events-topic-acl" = {
    acl_id = "topic/events"
    acl_entries = [
      {
        principal       = "User:YOUR_PROJECT_NUMBER-compute@developer.gserviceaccount.com"
        permission_type = "ALLOW"
        operation       = "ALL"
        host            = "*"
      }
    ]
  }
}
